{% extends "home.html" %}
{% load static %}

{% block content %}
{% block emp %}
{% block manager %}

<div class="emp">
    <h4 style="text-align: left; margin: 50px 0px 50px 50px;">
      Pending Tasks of Approval
    </h4>

{% if att_data %}


    <table border='1' style="margin-left: 55;" class="table text-center">
        <thead class="thead-dark">
        <tr>
            <th scope="col">Entry filled by</th>
            <th scope="col">Date</th>
            <th scope="col">Attendance</th>
            <th scope="col">Update Record</th>
            <th scope="col">Approve Record</th>
        </tr>
        </thead>
        <tbody>
        {% for x in att_data %}
        <tr>
            <td>{{ x.user_id }} - {{ x.user.first_name }} {{ x.user.last_name }}</td>
            <td>{{ x.tdate }}</td>
            <td>{{ x.attendance }}</td>
            <td> <a href="{% url 'TLUpdate' x.pk %}" class="btn btn-outline-danger btn-sm">Update</a></td>
            <td> <a href="#" class="btn btn-outline-success btn-sm">Approve</a></td>
        {% endfor %}
        </tr>
        </tbody>
    </table>
</div>

{% else %}
    <div style="margin-left: 50px; margin-top: 0px; margin-bottom: 0px; font-size: 18px;">
        <br>
        Yohoo, no pending task yet!
    </div>
{% endif %}

{% endblock %}
{% endblock %}
{% endblock %}

<!-- <script>
    // JavaScript/jQuery code to handle the button click and update the UI
    $(document).ready(function() {
        $(".approve-btn").click(function(e) {
            e.preventDefault();
            var recordId = $(this).data("id");
            // Get the CSRF token value
            var csrftoken = $("[name=csrfmiddlewaretoken]").val();
            // Make an AJAX request to update the record as approved
            $.ajax({
                url: "/approve-attendance/" + recordId + "/",
                type: "POST",
                beforeSend: function(xhr) {
                    // Set the CSRF token header
                    xhr.setRequestHeader("X-CSRFToken", csrftoken);
                },
                success: function(response) {
                    // On success, hide the button and display the "Approved" badge
                    $(this).replaceWith('<span class="badge badge-success">Approved</span>');
                },
                error: function(xhr, textStatus, errorThrown) {
                    // Handle any error that may occur during the AJAX request
                    console.log(errorThrown);
                }
            });
        });
    });
</script> -->
